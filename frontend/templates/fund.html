{% extends "base.html" %}
{% block title %}Fund Management - Railyard Markets{% endblock %}
{% block page_title %}Fund Management{% endblock %}
{% block content %}

<!-- Fund Overview Card -->
<md-elevated-card style="margin-bottom: 24px;">
    <div style="padding: 16px; border-bottom: 1px solid var(--md-sys-color-outline-variant);">
        <div style="display: flex; align-items: center; gap: 12px;">
            <span class="material-symbols-outlined" style="color: var(--md-sys-color-primary); font-size: 28px;">account_balance</span>
            <h3 style="margin: 0;">Fund Overview</h3>
        </div>
    </div>
    
    <div style="padding: 32px;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 24px;">
            <div>
                <div style="color: var(--md-sys-color-on-surface-variant); font-size: 12px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;">
                    Total Capital
                </div>
                <div style="font-size: 32px; font-weight: 500; color: var(--md-sys-color-primary);" id="totalCapital">
                    $0
                </div>
            </div>
            
            <div>
                <div style="color: var(--md-sys-color-on-surface-variant); font-size: 12px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;">
                    Co-Founders
                </div>
                <div style="font-size: 32px; font-weight: 500;" id="cofounderCount">
                    0
                </div>
            </div>
            
            <div>
                <div style="color: var(--md-sys-color-on-surface-variant); font-size: 12px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;">
                    Your Ownership
                </div>
                <div style="font-size: 32px; font-weight: 500; color: var(--md-sys-color-tertiary);" id="yourOwnership">
                    0%
                </div>
            </div>
        </div>
    </div>
</md-elevated-card>

<!-- Co-Founders List Card -->
<md-elevated-card style="margin-bottom: 24px;">
    <div style="padding: 16px; border-bottom: 1px solid var(--md-sys-color-outline-variant);">
        <div style="display: flex; align-items: center; gap: 12px;">
            <span class="material-symbols-outlined" style="color: var(--md-sys-color-primary); font-size: 28px;">group</span>
            <h3 style="margin: 0;">Co-Founders</h3>
        </div>
    </div>
    
    <div style="padding: 32px;">
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="border-bottom: 2px solid var(--md-sys-color-outline-variant); text-align: left;">
                        <th style="padding: 12px 16px; font-weight: 500; color: var(--md-sys-color-on-surface-variant);">Name</th>
                        <th style="padding: 12px 16px; font-weight: 500; color: var(--md-sys-color-on-surface-variant);">Email</th>
                        <th style="padding: 12px 16px; font-weight: 500; color: var(--md-sys-color-on-surface-variant); text-align: right;">Contribution</th>
                        <th style="padding: 12px 16px; font-weight: 500; color: var(--md-sys-color-on-surface-variant); text-align: right;">Ownership</th>
                        <th style="padding: 12px 16px; font-weight: 500; color: var(--md-sys-color-on-surface-variant);">Joined</th>
                    </tr>
                </thead>
                <tbody id="cofoundersTable">
                    <tr>
                        <td colspan="5" style="padding: 40px; text-align: center; color: var(--md-sys-color-on-surface-variant);">
                            <md-circular-progress indeterminate style="--md-circular-progress-size: 48px;"></md-circular-progress>
                            <div style="margin-top: 16px;">Loading co-founders...</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</md-elevated-card>

<!-- Invite Co-Founder Card (Admin Only) -->
{% if session.get('role') == 'admin' %}
<md-elevated-card style="margin-bottom: 24px;">
    <div style="padding: 16px; border-bottom: 1px solid var(--md-sys-color-outline-variant);">
        <div style="display: flex; align-items: center; gap: 12px;">
            <span class="material-symbols-outlined" style="color: var(--md-sys-color-primary); font-size: 28px;">person_add</span>
            <h3 style="margin: 0;">Invite Co-Founder</h3>
        </div>
    </div>
    
    <div style="padding: 32px;">
        <p style="margin: 0 0 24px; color: var(--md-sys-color-on-surface-variant);">
            Send an invitation email to add a new co-founder to the fund. The invitation will expire in 7 days.
        </p>
        
        <form id="inviteForm">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; max-width: 600px;">
                <md-filled-text-field 
                    label="Email Address" 
                    name="email" 
                    type="email"
                    required
                    id="inviteEmail">
                </md-filled-text-field>
                
                <md-filled-text-field 
                    label="First Name" 
                    name="first_name" 
                    required
                    id="inviteFirstName">
                </md-filled-text-field>
            </div>
            
            <div style="margin-top: 24px;">
                <md-filled-button type="submit">
                    <span class="material-symbols-outlined" slot="icon">send</span>
                    Send Invitation
                </md-filled-button>
            </div>
        </form>
    </div>
</md-elevated-card>

<!-- Pending Invitations Card (Admin Only) -->
<md-elevated-card>
    <div style="padding: 16px; border-bottom: 1px solid var(--md-sys-color-outline-variant);">
        <div style="display: flex; align-items: center; gap: 12px;">
            <span class="material-symbols-outlined" style="color: var(--md-sys-color-tertiary); font-size: 28px;">schedule_send</span>
            <h3 style="margin: 0;">Pending Invitations</h3>
        </div>
    </div>
    
    <div style="padding: 32px;">
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="border-bottom: 2px solid var(--md-sys-color-outline-variant); text-align: left;">
                        <th style="padding: 12px 16px; font-weight: 500; color: var(--md-sys-color-on-surface-variant);">Email</th>
                        <th style="padding: 12px 16px; font-weight: 500; color: var(--md-sys-color-on-surface-variant);">Name</th>
                        <th style="padding: 12px 16px; font-weight: 500; color: var(--md-sys-color-on-surface-variant);">Sent Date</th>
                        <th style="padding: 12px 16px; font-weight: 500; color: var(--md-sys-color-on-surface-variant);">Expires</th>
                    </tr>
                </thead>
                <tbody id="pendingInvitesTable">
                    <tr>
                        <td colspan="4" style="padding: 40px; text-align: center; color: var(--md-sys-color-on-surface-variant);">
                            <md-circular-progress indeterminate style="--md-circular-progress-size: 48px;"></md-circular-progress>
                            <div style="margin-top: 16px;">Loading invitations...</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</md-elevated-card>
{% endif %}

<script src="{{ url_for('static', filename='js/fund.js') }}"></script>

{% endblock %}
